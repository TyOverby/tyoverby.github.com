<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Inscribe</title>
    <link href="http://fonts.googleapis.com/css?family=Cardo:700" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="./style.css">
    <link rel="stylesheet" type="text/css" href="./atelier-lakeside.light.css">
  </head>
  <body>
    <div id="wrapper">
      <header>
        <h1>Inscribe</h1>
        <h2>A static blog generator without features</h2>
        <div id="byline"><span>By</span><span>Ty Overby</span></div>
      </header>
      <article><p>I&#39;ve wanted to write a blog for a while.  I&#39;ll regularly have ideas that I want
to share with others on a permanent basis, and having a nice tech-themed blog
seems to be the way to do that.  However, I&#39;m not a fan of paying for hosting
and I&#39;m a fan of Github Pages, so I&#39;ll be in need of  a static site generator
to make the viewable content for github to host.</p>
<p>Github Pages comes with its own static site generator
<a href="http://jekyllrb.com/">Jekyll</a> which I did play with for a few hours of
frustratingly reading the documentation.  The truth was that I just wasn&#39;t
willing to learn a new templating language, a project structure, and a suite
of configuration settings.  While exploring other static site generators, I
came across <a href="https://github.com/jnordberg/wintersmith">Wintersmith</a> which although
it probably has everything you might want in a static site generator,
doesn&#39;t really meet my definition of <em>simple</em>.</p>
<p>It was through looking at these existing generators that I was able to narrow my
focus on what I think my ideal blog generator would look like.  What I&#39;ve made
(and will be talking about for the rest of this post) is that static-content blog
generator which I&#39;ve named Inscribe.</p>
<h2 id="hello-inscribe">Hello Inscribe</h2>
<p>For any content-focused site (blogs are an excelent subset), there are typically
3 forms of data that are most important to producing the final content.</p>
<ul>
<li>Sitewide settings</li>
<li>Post specific settings</li>
<li>Post content</li>
</ul>
<p><strong>Sitewide settings</strong> are for conveniantly storing settings like the name of your blog, or
the author.  This could also include project settings for the static-site generator to work with.
<strong>Post specific settings</strong> might include the date that a post was made, the title of the post,
the author (maybe you have guest authors?) or any other metadata that you want included on a
post-by-post basis.  The <strong>post content</strong> is the most obvious of the three; it&#39;s the actual words that you want
to get displayed on a page somewhere.</p>
<p>So how does Inscribe store and organize these three forms of data?  Lets look at a sample Inscribe directory
to find out.</p>
<pre><code>$ tree
.
├── blog.json
└── posts
    ├── helloworld.md
    └── inscribe.md
</code></pre><p>As you might be able to guess, the <strong>sitewide settings</strong> are stored in <code>blog.json</code> while both <strong>post specific settings</strong> and
<strong>post content</strong> are stored in the markdown files in the <code>posts</code> directory.</p>
<h2 id="-blog-json">./blog.json</h2>
<p>Let&#39;s look at a really simple <code>blog.json</code> file.  A basic <code>blog.json</code> file can be created from the command
line with <code>inscribe init</code>.</p>
<pre><code class="lang-json">{
    "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"Ty's Blog"</span></span>,
    "<span class="hljs-attribute">subName</span>": <span class="hljs-value"><span class="hljs-string">"musings of a madman"</span></span>,
    "<span class="hljs-attribute">author</span>": <span class="hljs-value"><span class="hljs-string">"Ty Overby"</span></span>,
    "<span class="hljs-attribute">_outDir_</span>": <span class="hljs-value"><span class="hljs-string">"./out/"</span></span>,
    "<span class="hljs-attribute">_postsDir_</span>": <span class="hljs-value"><span class="hljs-string">"./posts/"</span>
</span>}
</code></pre>
<p>The keys with underscores before and after them are required for Inscribe to work.  Everything else is optional.
<code>_outDir_</code> is the directory that your rendered html will eventuall go.  <code>_postsDir_</code> is the directory in which Inscribe will look for posts.</p>
<h2 id="-posts-some_post-md">./posts/some_post.md</h2>
<p>So somehow we need to fit both the <strong>post specific settings</strong> and <strong>post content</strong> into a single markup file.
This is a problem already solved by <a href="https://github.com/jnordberg/wintersmith">Wintersmith</a>, and I liked their
solution so I stole it.  What we do is denote a section at the top of the file that consists of key-value pairs
of properties for the post.
This is what it looks like:</p>
<pre><code class="lang-markdown"><span class="hljs-horizontal_rule">---</span>
title: Some Post Title
subtitle: A really bad subtitle
<span class="hljs-header">date: 2014-04-26 PST
---</span>

<span class="hljs-header"># Markdown Header</span>
The rest of your blog goes here.
</code></pre>
<h2 id="static-content-generation-or-lack-thereof-">Static content generation (or lack thereof)</h2>
<p>So by this point you&#39;re probably wondering how those html files that you want so bad get generated.
Well, sorry to break the news to you, but they don&#39;t.
Inscribe only goes half way.  It gathers and organizes information about the blog, and about the posts,
but it dumps that info into a single .json file and walks away.</p>
<p>Before you close this tab and head back to hackernews hear me out:  I don&#39;t pretend to know your needs
better than you do.  All I&#39;ve done is written a pretty tiny script that gathers these data and hands
it off to you in a nice little package.  No templating language to learn, no <em>programming</em> language to
learn; if you can read a JSON file, you can easily access the data that matters in your blog.</p>
<p>Ok, assuming you&#39;re still with me, when you run <code>inscribe generate</code>, it reads your <code>blog.json</code> and all the
files in <code>_outDir</code> and spews out a <code>bundle.json</code> in the working directory.  This json file contains
all the information about your blog and the posts.  Here&#39;s what it looks like when given the previous <code>blog.json</code>
and the markdown file:</p>
<pre><code class="lang-json">{
    "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"Ty's Blog"</span></span>,
    "<span class="hljs-attribute">subName</span>": <span class="hljs-value"><span class="hljs-string">"musings of a madman"</span></span>,
    "<span class="hljs-attribute">author</span>": <span class="hljs-value"><span class="hljs-string">"Ty Overby"</span></span>,
    "<span class="hljs-attribute">_outDir_</span>": <span class="hljs-value"><span class="hljs-string">"./out/"</span></span>,
    "<span class="hljs-attribute">_postsDir_</span>": <span class="hljs-value"><span class="hljs-string">"./posts/"</span></span>,
    "<span class="hljs-attribute">_posts_</span>": <span class="hljs-value">[{
        "<span class="hljs-attribute">title</span>": <span class="hljs-value"><span class="hljs-string">"Some Post Title"</span></span>,
        "<span class="hljs-attribute">subtitle</span>": <span class="hljs-value"><span class="hljs-string">"A really bad subtitle"</span></span>,
        "<span class="hljs-attribute">date</span>": <span class="hljs-value"><span class="hljs-string">"2014-04-26 PST"</span></span>,
        "<span class="hljs-attribute">_file_</span>": <span class="hljs-value"><span class="hljs-string">"some_post.md"</span></span>,
        "<span class="hljs-attribute">_contents_</span>": <span class="hljs-value"><span class="hljs-string">"# Markdown Header\nThe rest of your blog goes here."</span>
    </span>}]
</span>}
</code></pre>
<p>The first thing that should jump out at you is that the upper level of the structure is exactly the same
as our <code>blog.json</code> file.  The only field that has been added is <code>_posts_</code>, which is an array containing
maps for all of the blog posts.</p>
<p>The post object itself is also quite familiar.  Those key-value pairs defined in the top of the post are
present as key-value pairs on the post object.  The internal properties are <code>_file_</code> and <code>_contents_</code> which
contain the file name the blog was generated from and the <strong>post content</strong> from that post.</p>
<p>There are two things to note about the value of the  <code>_contents_</code> field.</p>
<ol>
<li>The header information that is used to fill out the metadata is gone.</li>
<li>The content is still in markdown format.</li>
</ol>
<p>The first of these should be fairly unsurprising.  There&#39;s no reason we&#39;d want that section of the file there after
the info is already extracted out nice and cleanly for you.</p>
<p>The second one might be a bit more surprising.  This might have been the stage where the markdown
tohtml stage occurred, but it didn&#39;t.  The truth is that Inscribe doesn&#39;t care what you write the <strong>post content</strong>
in.</p>
<p>This has a few implications.  The most important of which is that Inscribe can&#39;t apply a whitelist when searching
for certain files in the <code>_postsDir_</code> directory.  The result of this is that every file inside <code>_postsDir_</code> must
be a valid post file.  No images or misc files.</p>
<h2 id="after-inscribe">After Inscribe</h2>
<p>So <code>$ inscribe generate</code> produces a <code>bundle.json</code> file, but what happens after that?  I&#39;d like to say
&quot;this is left as an exercise to the reader&quot;, but the truth is that I&#39;ve already written a proper jade-markdown
that expects <strong>post content</strong> to be markdown, and requires a <code>post.jade</code> file for templating the rest of the
page.</p>
<p>I&#39;m hoping that other people will create their own scripts that take <code>bundle.json</code> and do magical things with it.
But if they don&#39;t and I&#39;m the only one that uses it, that&#39;s file with me too. <code>:)</code></p>
</article>
    </div>
  </body>
</html>